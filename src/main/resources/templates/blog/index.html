<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
    <div th:replace="~{layout/site :: layout(~{::section})}">
        <section>
            <!-- Page header -->
            <div class="pt-4 md:pt-8 pb-8">
                <!-- Filter info (category/tag page) -->
                <div th:if="${filterType != null and filterValue != null}">
                    <nav class="text-sm text-secondary mb-4">
                        <a th:href="@{/blog}" class="hover:text-[var(--color-link)] transition-colors">Blog</a>
                        <span class="mx-1.5">/</span>
                        <span th:if="${filterType == 'category'}" th:text="${filterValue}">Category</span>
                        <span th:if="${filterType == 'tag'}" th:text="'#' + ${filterValue}">Tag</span>
                    </nav>
                    <h1 class="text-2xl md:text-3xl font-bold tracking-tight mb-1">
                        <span th:if="${filterType == 'category'}" th:text="${filterValue}">Category</span>
                        <span th:if="${filterType == 'tag'}" th:text="'#' + ${filterValue}">Tag</span>
                    </h1>
                    <p class="text-sm text-secondary" th:text="${totalCount} + ' posts'">5 posts</p>
                </div>

                <!-- Default: all posts -->
                <div th:unless="${filterType != null and filterValue != null}">
                    <h1 class="text-2xl md:text-3xl font-bold tracking-tight mb-1">
                        Blog
                    </h1>
                    <p class="text-sm text-secondary" th:text="${totalCount} + ' posts'">5 posts</p>
                </div>
            </div>

            <!-- Post list -->
            <div class="space-y-1">
                <article th:each="post : ${posts}">
                    <a th:href="@{/blog/posts/{slug}(slug=${post.slug})}"
                       class="group block py-5 -mx-3 px-3 rounded-lg nav-hover transition-colors">
                        <div class="flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-4">
                            <!-- Date -->
                            <time class="text-sm text-secondary tabular-nums shrink-0 sm:w-24"
                                  th:datetime="${post.date}"
                                  th:text="${#temporals.format(post.date, 'yyyy-MM-dd')}">
                                2025-01-15
                            </time>
                            <!-- Title + meta -->
                            <div class="flex-1 min-w-0">
                                <h2 class="text-base font-medium group-hover:text-[var(--color-link)] transition-colors truncate"
                                    style="color: var(--color-text);"
                                    th:text="${post.title}">
                                    Spring Boot and Docker Setup
                                </h2>
                                <p th:if="${post.description}"
                                   class="text-sm text-secondary mt-0.5 line-clamp-1"
                                   th:text="${post.description}">
                                    A brief description of the post.
                                </p>
                                <div class="flex items-center gap-2 mt-1.5 flex-wrap">
                                    <!-- Category pill -->
                                    <span class="text-xs px-2 py-0.5 rounded-full bg-soft border border-theme text-secondary"
                                          th:text="${post.category}">SPRING</span>
                                    <!-- Tags -->
                                    <span th:each="tag, iterStat : ${post.tags}"
                                          th:if="${iterStat.index lt 3}"
                                          class="text-xs text-secondary"
                                          th:text="'#' + ${tag}">
                                        #Docker
                                    </span>
                                </div>
                            </div>
                        </div>
                    </a>
                </article>

                <!-- Empty state -->
                <div th:if="${posts == null or posts.isEmpty()}" class="py-16 text-center">
                    <p class="text-secondary">No posts yet.</p>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
